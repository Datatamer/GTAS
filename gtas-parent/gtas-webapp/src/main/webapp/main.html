<!doctype html>
<html lang="en" ng-app="myApp">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>GTAS</title>
  <link rel="stylesheet" href="resources/bower_components/open-sans-fontface/open-sans.css" />
  <link rel="stylesheet" href="resources/css/style-icomoon.css" />
   <link rel="stylesheet" href="resources/node_modules/cbp-theme/dist/cbp-theme.css" type="text/css" media="all" />
  <link rel="stylesheet" href="resources/bower_components/bootstrap-select/dist/css/bootstrap-select.min.css" />
  <link rel="stylesheet" href="resources/bower_components/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" />
  <link rel="stylesheet" href="resources/bower_components/seiyria-bootstrap-slider/dist/css/bootstrap-slider.min.css" />
  <link rel="stylesheet" href="resources/bower_components/selectize/dist/css/selectize.bootstrap3.css" />
  <link rel="stylesheet" href="resources/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" />
  <link rel="stylesheet" href="resources/bower_components/angular-ui-grid/ui-grid.min.css" />
  <link rel="stylesheet" href="resources/css/query-builder.default.css" />
  <link rel="stylesheet" href="resources/bower_components/angular-material/angular-material.min.css" />
  <link rel="stylesheet" href="resources/css/sb-admin-2.css">
  <link rel="stylesheet" href="resources/bower_components/font-awesome/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="resources/css/gtas.css" />
  <link rel="stylesheet" href="resources/css/main.css" />
  <style type="text/css">
    .ng-cloak {
      display: none !important;
    }
  </style>

</head>

<body data-ng-controller="NavCtrl" class="ng-cloak">
	<div role="navigation" class="cbp-header">
		<div class="container-fluid">
		  <div class="navbar-header">
		    <a class="navbar-brand" href="#/dashboard">
		      <div class="brand">Global Travel Assessment System</div>
		      <div class="dhs-brand"></div>
		    </a>		    
		    <button data-target="#navbar-user-info" data-toggle="collapse" type="button" class="navbar-toggle">
		    <span class="sr-only">Toggle Global Navigation</span>
		    </button>
		  </div>
		  <div id="navbar-user-info" class="navbar-collapse collapse">
		    <ul class="nav navbar-nav navbar-right">
		     <li class="dropdown">
		        <a class="dropdown-toggle" data-toggle="dropdown" role="button" href="#">
		          Manage<span class="caret"></span>
		        </a>
		        <ul class="dropdown-menu" role="menu">
		          <li data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.MANAGE_QUERIES }}]"><a href="#/build/query">
		          	<i class="glyphicon glyphicon-filter"></i> 
		          	&nbsp;{{'menu.queries' | translate}}</a>
		          </li>
		          <li data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.MANAGE_QUERIES }}]"><a href="#/adhocquery">
		          	<i class="glyphicon glyphicon-search"></i> 
		          	&nbsp;Quick Query</a>
		          </li>
		          <li data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.MANAGE_RULES }}]"><a href="#/build/rule">
		          	<i class="glyphicon glyphicon-flag"></i>
		          	&nbsp;{{'menu.riskcriteria' | translate}}</a>
		          </li>
		          <li data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.MANAGE_WATCHLIST }}]"><a href="#/watchlists">
		          	<i class="glyphicon glyphicon-eye-open"></i></span> 
		          	&nbsp;{{'menu.watchlist' | translate}}</a>
		          </li>
		        </ul>
		      </li>
		      <li data-has-role="[{{ ROLES.ADMIN }}]" class="dropdown">
		        <a class="dropdown-toggle" data-toggle="dropdown" role="button" href="#">
		          Admin<span class="caret"></span> <!-- Your application name goes here!!!-->
		        </a>
		        <ul class="dropdown-menu" role="menu">
		          <li><a href="#/admin">
		          	<i class="glyphicon glyphicon-edit"></i></span> &nbsp;{{'menu.admin' | translate}}</a>
		          </li>
		          <li><a href="#/upload">
		          	<i class="glyphicon glyphicon-upload"></i></span> &nbsp;{{'menu.upload' | translate}}</a>
		          </li>
		        </ul>
		      </li>
		      <li>
		        <a href="https://github.com/US-CBP/GTAS/issues">
		          <span class="fa fa-comment"></span>
		          <span class="hidden-sm">Feedback</span>
		        </a>
		      </li>
		      <li data-toggle="hover" class="dropdown">
		        <a href="#" data-toggle="dropdown" class="dropdown-toggle">
		          <span class="fa fa-user"></span>
		          <span class="hidden-sm">
		          	{{currentlyLoggedInUser.lastName}}, {{currentlyLoggedInUser.firstName}}
		          </span>
		          <span class="caret"></span>
		        </a>
		        <ul rel="right-menu-links" role="menu" class="dropdown-menu">
		          <li data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.MANAGE_QUERIES }},{{ ROLES.MANAGE_RULES }},{{ ROLES.MANAGE_WATCHLIST }},{{ ROLES.VIEW_FLIGHT_PASSENGERS }}]">
		            <a title="Settings" href="#/userSettings">{{'menu.settings' | translate}}</a>
		          </li>
		          <li class="divider"></li>
		          <li>
		            <a href ng-click="logout()" title="Logout" >{{'login.logout' | translate}}</a>
		          </li>
		        </ul>
		      </li>
		    </ul>
		  </div>
		</div>
	</div>
	<div role="navigation" class="app-header">
	    <div class="container-fluid">
	      <div class="navbar-header">
	        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
	        <span class="sr-only">Toggle Application Navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        </button>
	      </div>
	
	      <!-- Collect the nav links, forms, and other content for toggling -->
	      <div class="collapse navbar-collapse">
	        <div class="nav navbar-nav">
	          <ul data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.VIEW_FLIGHT_PASSENGERS }}]" 
	          	class="nav nav-tabs nav-tabs-light" role="tablist">
	          	<li >
	              <a ng-class="{'active':selectedTab==='flights'}" ng-click="setSelectedTab('flights')" href="#/flights" role="tab" data-toggle="tab">{{'menu.flights' | translate}}</a>
	            </li>   
	            <li class="passengers">
	              <a ng-click="setSelectedTab('passengers')" 
	              	href="#/passengers" role="tab" data-toggle="tab">
	              	<i class="glyphicon glyphicon-user"></i></span> &nbsp; {{'menu.passengers' | translate}}
	              </a>
	            </li>
	            <li>
	              <a class="cases" ng-click="setSelectedTab('cases')" href="#/cases" role="tab" data-toggle="tab">
	              	<i class="glyphicon glyphicon-folder-close"></i> &nbsp;Cases
	              </a>
	            </li>      
	          </ul>
	        </div>
	
	        <div class="nav navbar-nav navbar-form navbar-right">
	          <form role="search">
	            <div class="form-group">
	              <div class="input-group">
	                <div class="mdl-textfield mdl-js-textfield">
	                  <label for="main-search" class="mdl-textfield__label">Search</label>
	                  <input type="text" id="main-search" class="mdl-textfield__input" />
	                </div>
	                <span class="input-group-btn">
	                  <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i></button>
	                </span>
	              </div>
	            </div>
	          </form>
	        </div>
	      </div>
	    </div>
	</div>

  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div data-ng-controller="NavCtrl">
        <span style="color: black;">

          <div class="nav navbar-nav navbar-right" ng-if="showNav()" style="margin: 0;">
            <md-button class="md-button" target="_blank" href="https://github.com/US-CBP/GTAS/issues">
              <span><i class="fa fa-stack-overflow"></i></span>&nbsp;Feedback</md-button>
          </div>
          <div class="nav navbar-nav navbar-right" ng-if="showNav()" style="margin: 0;">
          	<md-menu md-position-mode="target-right target" md-offset="2 42">
          		<md-button ng-click="$mdOpenMenu()" class="md-button" ng-class="{'md-raised md-primary': onRoute('dashboard')}" href="">
          		{{currentlyLoggedInUser.lastName}}, {{currentlyLoggedInUser.firstName}}
          		<span style="color: black;" class="caret"></span>
          		</md-button>
          		<md-menu-content class="dropdown">
	          		<md-menu-item>
	          			<md-button class="md-button" ng-class="{'md-raised md-primary': onRoute('userSettings')}" ng-click="logout()">{{'login.logout' | translate}}</md-button>
	          		</md-menu-item>
	          		<md-menu-item>
			          <md-button data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.MANAGE_QUERIES }},{{ ROLES.MANAGE_RULES }},{{ ROLES.MANAGE_WATCHLIST }},{{ ROLES.VIEW_FLIGHT_PASSENGERS }}]"
			                     class="md-button" ng-class="{'md-raised md-primary': onRoute('userSettings')}" ng-disabled="onRoute('userSettings')"
			                     href="#/userSettings" ng-click="this.close()">
			                {{'menu.settings' | translate}}			            
			          </md-button>
	          		</md-menu-item>
          		</md-menu-content>
          	</md-menu>
          </div>
          <div class="nav navbar-nav navbar-right" ng-if="showNav() == false" style="margin: 0;">
            <md-button class="md-button" onclick="window.close()">X</md-button>
          </div>
        </span>
        <span style="color: black;" data-ng-if="showNav()">



          <!-- View Passengers -->
          <md-button data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.VIEW_FLIGHT_PASSENGERS }}]" class="md-button" ng-class="{'md-raised md-primary': onRoute('passengers'), 'nav-item-selected':selectedTab==='passengers'}"
                     ng-disabled="onRoute('passengers')" href="#/passengers" ng-click="this.close(); setSelectedTab('passengers')"> <span><i class="glyphicon glyphicon-user"></i></span> &nbsp; {{'menu.passengers' | translate}}
              </md-button>

          <!-- View Cases -->
          <md-button data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.VIEW_FLIGHT_PASSENGERS }}]" class="md-button" ng-class="{'md-raised md-primary': onRoute('cases'), 'nav-item-selected':selectedTab==='cases'}"
                     ng-disabled="onRoute('cases')" href="#/cases" ng-click="this.close(); setSelectedTab('cases')"
                     style="padding-right:20px; border-right: 1px solid #ccc;">
            <span><i class="glyphicon glyphicon-folder-close"></i> &nbsp;Cases</span></md-button>

        <!-- MANAGE -->
        <md-menu data-has-role="[{{ ROLES.ADMIN }}, {{ROLES.MANAGE_QUERIES}}, {{ROLES.MANAGE_RULES}} ]"md-offset="2 42">
          <md-button ng-click="$mdOpenMenu()" class="md-button" ng-class="{'md-raised md-primary': onRoute('dashboard')}" href="">
            Manage&nbsp;
            <span style="color: black;" class="caret"></span>
          </md-button>
          <md-menu-content class="dropdown">
            <md-menu-item>
              <md-button data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.MANAGE_QUERIES }}]" class="md-button" ng-class="{'md-raised md-primary': onRoute('queries')}"
                ng-disabled="onRoute('queries')" href="#/build/query" ng-click="this.close(); setSelectedTab('query')"><span><i class="glyphicon glyphicon-filter"></i> &nbsp;{{'menu.queries' | translate}}</span></md-button>
            </md-menu-item>
            <md-menu-item>
              <md-button data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.MANAGE_QUERIES }}]" class="md-button" ng-class="{'md-raised md-primary': onRoute('adhocquery')}"
                ng-disabled="onRoute('adhocquery')" href="#/adhocquery" ng-click="this.close(); setSelectedTab('adhocquery')"><span><i class="glyphicon glyphicon-search"></i> &nbsp;Quick Query</span></md-button>
            </md-menu-item>
            <md-menu-item>
              <md-button data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.MANAGE_RULES }}]" class="md-button" ng-class="{'md-raised md-primary': onRoute('risks')}"
                ng-disabled="onRoute('risks')" href="#/build/rule" ng-click="this.close(); setSelectedTab('rules')">
                <span><i class="glyphicon glyphicon-flag"></i></span> &nbsp;{{'menu.riskcriteria' | translate}}</md-button>
            </md-menu-item>
            <md-menu-item>
              <md-button data-has-role="[{{ ROLES.ADMIN }}, {{ ROLES.MANAGE_WATCHLIST }}]" class="md-button" ng-class="{'md-raised md-primary': onRoute('watchlists')}"
                ng-disabled="onRoute('watchlists')" href="#/watchlists" ng-click="this.close(); setSelectedTab('watchlist')"><span><i class="glyphicon glyphicon-eye-open"></i></span> &nbsp;{{'menu.watchlist' | translate}}</md-button>
            </md-menu-item>
          </md-menu-content>
        </md-menu>

        <!-- ADMIN -->
        <md-menu data-has-role="[{{ ROLES.ADMIN }}]" md-offset="2 42">
          <md-button ng-click="$mdOpenMenu()" class="md-button" ng-class="{'md-raised md-primary': onRoute('dashboard')}" href="">
            Admin&nbsp;
            <span style="color: black;" class="caret"></span>
          </md-button>
          <md-menu-content class="dropdown">
            <md-menu-item>
              <md-button data-has-role="[{{ ROLES.ADMIN }}]" class="md-button" ng-class="{'md-raised md-primary': onRoute('admin')}" ng-disabled="onRoute('admin')"
                href="#/admin" ng-click="setSelectedTab('admin');this.close();">
                <span><i class="glyphicon glyphicon-edit"></i></span> &nbsp;{{'menu.admin' | translate}} </md-button>
            </md-menu-item>
            <md-menu-item>
              <md-button data-has-role="[{{ ROLES.ADMIN }}]" class="md-button" ng-class="{'md-raised md-primary': onRoute('upload')}" ng-disabled="onRoute('upload')"
                href="#/upload" ng-click="setSelectedTab('upload');this.close();"><span><i class="glyphicon glyphicon-upload"></i></span> &nbsp;{{'menu.upload' | translate}}</md-button>
            </md-menu-item>
          </md-menu-content>
        </md-menu>
                         
        <!-- QUICK QUERY -->	        
		 	<span class="nav navbar-nav" style="position:absolute">
		        <input style="vertical-align:webkit-baseline-middle;"placeholder="Search" data-has-role="[{{ ROLES.ADMIN }}, {{ROLES.MANAGE_QUERIES }}]" label="SEARCH" class="adhocquery-search-bar" ng-model="searchBarContent.content" ng-disabled="onRoute('adhocquery') || currentLocation.val === '/adhocquery'" ng-keypress ="$event.which === 13 && searchBarQuery() && setSelectedTab('adhocquery')">
		        </input>
		        <button ng-disabled="onRoute('adhocquery') || currentLocation.val === '/adhocquery'" ng-click="searchBarQuery() && setSelectedTab('adhocquery')" aria-label="Search" class="btn btn-primary"><i class="fa fa-search"></i></button>
			</span>
        </span>
        </div>
      </div>
    </div>
  </nav>
  <div ui-view="nav"></div>
  <div ui-view="header" href="#/dashboard" ></div>
  <div class="content" ui-view=""></div>
  <div ui-view="footer"></div>

<script src="resources/bower_components/angular/angular.js"></script>
<script src="resources/bower_components/ng-idle/angular-idle.min.js"></script>
<script src="resources/bower_components/angular-ui-router/release/angular-ui-router.min.js"></script>
<script src="resources/bower_components/moment/min/moment.min.js"></script>
<script src="resources/bower_components/jquery/dist/jquery.js"></script>
<script src="resources/bower_components/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
<script src="resources/bower_components/bootbox/bootbox.js"></script>
<script src="resources/bower_components/seiyria-bootstrap-slider/dist/bootstrap-slider.min.js"></script>
<script src="resources/bower_components/selectize/dist/js/standalone/selectize.min.js"></script>
<script src="resources/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
<script src="resources/bower_components/jquery-extendext/jQuery.extendext.min.js"></script>
<script src="resources/bower_components/pdfmake/build/pdfmake.min.js"></script>
<script src="resources/bower_components/pdfmake/build/vfs_fonts.js"></script>
<script src="resources/bower_components/CSV-JS/csv.js"></script>
<script src="resources/bower_components/angular-ui-grid/ui-grid.js"></script>
<script src="resources/bower_components/angular-material/angular-material.min.js"></script>
<script src="resources/bower_components/angular-aria/angular-aria.min.js"></script>
<script src="resources/bower_components/angular-spinners/dist/angular-spinners.min.js"></script>
<script src="resources/bower_components/angular-animate/angular-animate.min.js"></script>
<script src="resources/bower_components/angular-messages/angular-messages.min.js"></script>
<script src="resources/bower_components/ng-file-upload/ng-file-upload-shim.min.js"></script>
<script src="resources/bower_components/ng-file-upload/ng-file-upload.min.js"></script>
<script src="resources/bower_components/spring-security-csrf-token-interceptor/dist/spring-security-csrf-token-interceptor.min.js"></script>
<script src="resources/bower_components/angular-swx-session-storage/release/swx-session-storage.min.js"></script>
<script src='resources/js/query-builder.js'></script>
<script src="resources/bower_components/d3/d3.min.js"></script>
<script src="resources/bower_components/angular-translate/angular-translate.js"></script>
<script src="resources/bower_components/angular-translate/angular-translate.min.js"></script>
<script src="resources/bower_components/angular-cookies/angular-cookies.min.js"></script>
<script src="resources/bower_components/angular-translate-storage-cookie/angular-translate-storage-cookie.js"></script>
<script src="resources/bower_components/angular-translate-loader-url/angular-translate-loader-url.min.js"></script>
<script src="resources/bower_components/chart.js/dist/Chart.min.js"></script>
<script src="resources/bower_components/angular-chart.js/dist/angular-chart.min.js"></script>
<script src="resources/bower_components/ammap/lib/3/ammap.js"></script>
<script src="resources/bower_components/ammap/lib/3/maps/js/worldLow.js"></script>
<script src="resources/bower_components/ammap/lib/3/plugins/export/export.min.js"></script>
<link rel="stylesheet" href="resources/bower_components/ammap/lib/3/plugins/export/export.css" type="text/css" media="all" />
<script src="resources/bower_components/ammap/lib/3/themes/light.js"></script>
<script src="resources/node_modules/cbp-theme/dist/inputmask.js"></script>
<script src="resources/node_modules/cbp-theme/dist/cbp-theme.js"></script>	
<link rel="stylesheet" href="resources/node_modules/cbp-theme/dist/cbp-theme.css" type="text/css" media="all" />


<script src='app.js'></script>
<script src='login/AuthService.js'></script>
<script src='login/LoginController.js'></script>
<script src='common/directives.js'></script>
<script src='common/filters.js'></script>
<script src='common/services.js'></script>
<script src='factory/ModalGridFactory.js'></script>
<script src='factory/JqueryQueryBuilderWidget.js'></script>
<script src='dashboard/DashboardController.js'></script>
<script src='dashboard/DashboardService.js'></script>
<script src='flights/FlightsModel.js'></script>
<script src='flights/FlightsController.js'></script>
<script src='flights/FlightsService.js'></script>
<script src='pax/PaxModel.js'></script>
<script src='pax/PaxController.js'></script>
<script src='pax/PaxService.js'></script>
<script src='pax/PaxFactory.js'></script>
<script src='build/BuildController.js'></script>
<script src='watchlists/WatchListController.js'></script>
<script src='admin/AdminController.js'></script>
<script src='admin/UserController.js'></script>
<script src='admin/UploadController.js'></script>
<script src='userSettings/UserSettingsController.js'></script>
<script src='userSettings/FilterCtrl.js'></script>
<script src='common/languagecontroller.js'></script>
<script src='cases/CasesController.js'></script>
<script src='adhocquery/AdhocQueryController.js'></script>
<script src='adhocquery/AdhocQueryService.js'></script>

  <script type="text/ng-template" id="dialog1.tmpl.html">
  <md-dialog ng-cloak>
    <form>
      <md-dialog-content>
        <div class="md-dialog-content">
          <h2 class="md-title">Idle Timeout Warning</h2>
          <div class="_md-dialog-content-body ng-scope"><p class="ng-binding">
            You have been idle for too long. If you wish to maintain your session please click the button below</p>
          </div>
          <span idle-countdown="countdown"> You will be logged out automatically in <strong style="font-size:xx-large;">{{countdown}}</strong> seconds. </span>
        </div>
      </md-dialog-content>
      <md-dialog-actions layout="row">
        <md-dialog-actions layout="row" class="layout-row">

          <md-button ng-click="dialog.hide()">Continue Session</md-button>
        </md-dialog-actions>
      </md-dialog-actions>
    </form>
  </md-dialog>
</script>

  <div>
    <spinner name="html5spinner" ng-cloak="">
      <div class="overlay"></div>
      <div class="spinner">
        <div class="double-bounce1"></div>
        <div class="double-bounce2"></div>
      </div>
      <div class="please-wait">{{'wl.wait' | translate}}...</div>
    </spinner>
  </div>
</body>

</html>